<style>
    body {
        background-image: url("https://png.pngtree.com/thumb_back/fw800/back_our/20190617/ourmid/pngtree-bird-book-tree-small-fresh-poster-banner-image_125954.jpg");
        background-size: cover;
        background-repeat: no-repeat;
        background-attachment: fixed;
        background-position: center; 
        width: 1349px; 
        height: 300px; 
        margin: 0;
        height: 100vh; 
        display: flex; 
        justify-content: center;
        align-items: center;
        position: relative;
        z-index: 1;
        
    }
    .card {
        max-width: 400px; 
        margin: 0 auto; 
        background-color: white; 
        padding: 20px; 
        border-radius: 10px;
        border: 2px solid #6d6767;
    }
    {{!-- .page-wrapper,
    .card {
        background: none; 
    } --}}
    .page-wrapper {
        position: relative; 
        z-index: 1; 
    }
    /* Thêm viền*/
    .form-group input[type="email"],
    .form-group input[type="password"] {
        border: 1px solid #555; 
        padding: 8px; 
        border-radius: 4px; 
        width: 100%; 
    }

</style>

<div class="container">
    <div class="page-wrapper bg-gra-02 p-t-30 p-b-100 font-poppins">
        <div class="wrapper wrapper--w680">
            <div class="card card-4">
                <div class="card-body">
                    <h2 class="title">Thay đổi mật khẩu</h2>
                    <form method="POST" action="/auth/resetpassword">
                        <div class="mb-3 form-group">
                            <label for="email" class="form-label">Nhập địa chỉ email của bạn</label>
                            <input type="email" class="form-control" name="email" id="email" placeholder="Nhập email" required="required">
                            <div class="error-message" id="emailError" style="color: red; font-style: italic; font-size: smaller;"></div>
                        </div>
                        <button type="submit" class="btn btn-primary ">Gửi mã xác minh qua email</button>
                        
                    </form>
                    <a href="/auth/register" class="nav-link"><u>Tạo một tài khoản mới</u></a>
                    {{#if error}}
                    <p class="error-message" style="color: red; font-style: italic;">{{error}}</p>
                    {{/if}}
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    const emailInput = document.getElementById('email');
    const resetButton = document.getElementById('resetButton');
    const emailError = document.getElementById('emailError');

    emailInput.addEventListener('input', updateResetButtonState);
    emailInput.addEventListener('input', validateEmailFormat);

    function updateResetButtonState() {
        if (emailInput.value) {
            resetButton.disabled = false;
        } else {
            resetButton.disabled = true;
        }
    }

    function validateEmailFormat() {
        const emailValue = emailInput.value;
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

        if (!emailPattern.test(emailValue)) {
            emailError.textContent = 'Định dạng email không hợp lệ';
        } else {
            emailError.textContent = '';
        }

        updateResetButtonState();
    }
</script>
